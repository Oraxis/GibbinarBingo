<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gibbinar Bingo</title>
  <style>
    :root {
      --bg: #0b1220;
      --panel: #121a2b;
      --text: #e8eefc;
      --muted: #a9b6d6;
      --border: rgba(255,255,255,0.14);
      --accent: #7aa7ff;
      --win: #38d996;
      --free: #ffd36b;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(1200px 700px at 20% 10%, #142043 0%, var(--bg) 55%);
      color: var(--text);
      min-height: 100vh;
      display: grid;
      place-items: center;
      padding: 24px;
    }
    .app {
      width: min(920px, 100%);
      background: rgba(18,26,43,0.85);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.35);
      backdrop-filter: blur(6px);
    }
    header {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 14px;
    }
    h1 {
      font-size: 24px;
      margin: 0;
      letter-spacing: 0.2px;
    }
    .controls {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    button {
      appearance: none;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.04s ease, background 0.2s ease, border-color 0.2s ease;
    }
    button:hover { background: rgba(255,255,255,0.10); border-color: rgba(255,255,255,0.22); }
    button:active { transform: translateY(1px); }

    .status {
      margin: 8px 0 16px;
      padding: 12px 14px;
      border: 1px solid var(--border);
      border-radius: 12px;
      color: var(--muted);
      background: rgba(255,255,255,0.04);
      line-height: 1.35;
    }
    .status.win {
      border-color: rgba(56,217,150,0.45);
      background: rgba(56,217,150,0.10);
      color: var(--text);
    }
    .status strong { color: var(--text); }

    .board {
      display: grid;
      grid-template-columns: repeat(5, minmax(0, 1fr));
      gap: 10px;
    }
    .cell {
      user-select: none;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.05);
      border-radius: 14px;
      padding: 12px 10px;
      min-height: 92px;
      display: grid;
      place-items: center;
      text-align: center;
      line-height: 1.2;
      font-weight: 700;
      cursor: pointer;
      transition: background 0.2s ease, border-color 0.2s ease, transform 0.04s ease;
      position: relative;
      overflow: hidden;
      outline: none;
    }
    .cell:hover {
      background: rgba(255,255,255,0.08);
      border-color: rgba(255,255,255,0.22);
    }
    .cell:active { transform: translateY(1px); }

    .cell.marked {
      background: rgba(122,167,255,0.18);
      border-color: rgba(122,167,255,0.45);
    }
    .cell.marked::after {
      content: "✓";
      position: absolute;
      top: 8px;
      right: 10px;
      font-size: 16px;
      color: var(--accent);
      opacity: 0.95;
    }

    .cell.free {
      background: rgba(255,211,107,0.12);
      border-color: rgba(255,211,107,0.45);
      cursor: default;
    }
    .cell.free::before {
      content: "FREE";
      position: absolute;
      bottom: 8px;
      left: 10px;
      font-size: 12px;
      letter-spacing: 0.12em;
      color: rgba(255,211,107,0.95);
      font-weight: 800;
    }

    /* Winning-line highlight */
    .cell.winner {
      border-color: rgba(56,217,150,0.85) !important;
      background: rgba(56,217,150,0.16) !important;
      box-shadow: 0 0 0 2px rgba(56,217,150,0.25) inset;
    }
    .cell.winner::after {
      /* keep the checkmark, but tint it toward win */
      color: var(--win);
    }

    .footer {
      margin-top: 16px;
      padding-top: 12px;
      border-top: 1px solid rgba(255,255,255,0.10);
      color: var(--muted);
      font-size: 14px;
      line-height: 1.35;
    }
    .footer a {
      color: var(--text);
      text-decoration: underline;
      text-underline-offset: 3px;
    }
    .note {
      font-size: 12px;
      color: rgba(169,182,214,0.85);
      margin-top: 8px;
    }

    @media (max-width: 640px) {
      .cell { min-height: 74px; padding: 10px 8px; font-weight: 650; }
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>Gibbinar Bingo</h1>
      <div class="controls">
        <button id="newCardBtn" type="button">New Card</button>
        <button id="clearMarksBtn" type="button">Clear Marks</button>
      </div>
    </header>

    <div id="status" class="status" role="status" aria-live="polite">
      Click squares to mark them. The center square is FREE. Complete any row, column, or diagonal to win.
    </div>

    <div id="board" class="board" aria-label="Bingo board"></div>

    <div class="footer">
      Please enjoy this unsanctioned game while listening to the latest AccountsRecovery.net webinar, hosted by Mike Gibb!
      Browse and register for his webinars here:
      <a href="https://www.accountsrecovery.net/event-directory/" target="_blank" rel="noopener noreferrer">
        https://www.accountsrecovery.net/event-directory/
      </a>
      <div class="note">No scores, no accounts, no ads — just bingo.</div>
    </div>
  </div>

  <script>
    const PHRASES = [
      "It depends…",
      "CFPB",
      "I'm not an attorney, but…",
      "Next best action",
      "Soon, AI will…",
      "That's a great question!",
      "Guardrails",
      "Reg F",
      "AI Vendors",
      "It's complicated…",
      "UDAAP",
      "Human-in-the-loop",
      "Regulatory gray area",
      "The President",
      "Risk tolerance",
      "We use AI to…",
      "FDCPA",
      "Consult your counsel",
      "The Courts",
      "Tech stack",
      "Congress",
      "Yes... and no…",
      "State Regulators",
      "You should do a webinar on that!",
      "State-by-state patchwork",
      "Model Training",
      "ChatGPT/Claude",
      "Audit trail",
      "Data privacy",
      "Consent management",
      "Vendor oversight",
      "Credit reporting",
      "Right-party contact",
      "Safe harbor",
      "Best practices",
      "Operational impact",
      "DOGE",
      "Explainable AI",
      "A/B Test"
    ];

    const BOARD_SIZE = 5;
    const TOTAL_CELLS = BOARD_SIZE * BOARD_SIZE;
    const CENTER_INDEX = Math.floor(TOTAL_CELLS / 2); // 12

    const boardEl = document.getElementById("board");
    const statusEl = document.getElementById("status");
    const newCardBtn = document.getElementById("newCardBtn");
    const clearMarksBtn = document.getElementById("clearMarksBtn");

    let boardPhrases = [];
    let marked = new Array(TOTAL_CELLS).fill(false);
    let hasWon = false;
    let winningIndices = new Set();

    function shuffle(arr) {
      const a = arr.slice();
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function escapeHtml(str) {
      return String(str)
        .replaceAll("&", "&amp;")
        .replaceAll("<", "&lt;")
        .replaceAll(">", "&gt;")
        .replaceAll('"', "&quot;")
        .replaceAll("'", "&#039;");
    }

    function setStatus(message, win) {
      statusEl.textContent = message;
      statusEl.classList.toggle("win", Boolean(win));
      if (win) {
        statusEl.innerHTML = "<strong>BINGO!</strong> " + escapeHtml(message.replace(/^BINGO!\s*/i, ""));
      }
    }

    function index(r, c) {
      return r * BOARD_SIZE + c;
    }

    function setFreeCenter() {
      marked[CENTER_INDEX] = true;
    }

    function resetWinState() {
      hasWon = false;
      winningIndices = new Set();
    }

    function generateCard() {
      // Pick 24 phrases because the center is FREE
      const shuffled = shuffle(PHRASES);
      const picks = shuffled.slice(0, TOTAL_CELLS - 1);

      boardPhrases = new Array(TOTAL_CELLS);
      let p = 0;
      for (let i = 0; i < TOTAL_CELLS; i++) {
        boardPhrases[i] = (i === CENTER_INDEX) ? "FREE" : picks[p++];
      }

      marked = new Array(TOTAL_CELLS).fill(false);
      setFreeCenter();
      resetWinState();

      renderBoard();
      setStatus("Click squares to mark them. The center square is FREE. Complete any row, column, or diagonal to win.", false);
    }

    function clearMarks() {
      marked = new Array(TOTAL_CELLS).fill(false);
      setFreeCenter();
      resetWinState();
      renderBoard();
      setStatus("Marks cleared (FREE stays marked). Keep going!", false);
    }

    function checkWin() {
      // Returns array of winning indices if a win is found, else null.

      // Rows
      for (let r = 0; r < BOARD_SIZE; r++) {
        const inds = [];
        let ok = true;
        for (let c = 0; c < BOARD_SIZE; c++) {
          const i = index(r, c);
          inds.push(i);
          if (!marked[i]) { ok = false; break; }
        }
        if (ok) return { type: "row", n: r + 1, indices: inds };
      }

      // Columns
      for (let c = 0; c < BOARD_SIZE; c++) {
        const inds = [];
        let ok = true;
        for (let r = 0; r < BOARD_SIZE; r++) {
          const i = index(r, c);
          inds.push(i);
          if (!marked[i]) { ok = false; break; }
        }
        if (ok) return { type: "column", n: c + 1, indices: inds };
      }

      // Diagonal TL->BR
      {
        const inds = [];
        let ok = true;
        for (let i = 0; i < BOARD_SIZE; i++) {
          const idx = index(i, i);
          inds.push(idx);
          if (!marked[idx]) { ok = false; break; }
        }
        if (ok) return { type: "diagonal", n: 1, indices: inds };
      }

      // Diagonal TR->BL
      {
        const inds = [];
        let ok = true;
        for (let i = 0; i < BOARD_SIZE; i++) {
          const idx = index(i, BOARD_SIZE - 1 - i);
          inds.push(idx);
          if (!marked[idx]) { ok = false; break; }
        }
        if (ok) return { type: "diagonal", n: 2, indices: inds };
      }

      return null;
    }

    function onCellClick(i) {
      if (hasWon) return;
      if (i === CENTER_INDEX) return; // don't toggle FREE

      marked[i] = !marked[i];

      const win = checkWin();
      if (win) {
        hasWon = true;
        winningIndices = new Set(win.indices);

        const msg =
          win.type === "row" ? `You completed Row ${win.n}.` :
          win.type === "column" ? `You completed Column ${win.n}.` :
          win.n === 1 ? "You completed the main diagonal." :
                        "You completed the anti-diagonal.";

        setStatus("BINGO! " + msg, true);
      }

      renderBoard();
    }

    function renderBoard() {
      boardEl.innerHTML = "";
      for (let i = 0; i < TOTAL_CELLS; i++) {
        const cell = document.createElement("div");

        const isFree = (i === CENTER_INDEX);
        const classes = ["cell"];
        if (marked[i]) classes.push("marked");
        if (isFree) classes.push("free");
        if (winningIndices.has(i)) classes.push("winner");

        cell.className = classes.join(" ");
        cell.setAttribute("role", "button");
        cell.setAttribute("tabindex", isFree ? "-1" : "0");
        cell.setAttribute("aria-pressed", marked[i] ? "true" : "false");
        cell.setAttribute("aria-label", boardPhrases[i]);

        cell.textContent = boardPhrases[i];

        cell.addEventListener("click", () => onCellClick(i));
        cell.addEventListener("keydown", (e) => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            onCellClick(i);
          }
        });

        boardEl.appendChild(cell);
      }
    }

    newCardBtn.addEventListener("click", generateCard);
    clearMarksBtn.addEventListener("click", clearMarks);

    generateCard();
  </script>
</body>
</html>